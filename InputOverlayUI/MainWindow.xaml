<Window x:Class="InputOverlayUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:converters="clr-namespace:InputOverlayUI.Converters"
        Title="Input Overlay Manager"
        Height="600" Width="800" MinHeight="400" MinWidth="600"
        WindowStartupLocation="CenterScreen"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        FontFamily="{DynamicResource MaterialDesignFont}">

    <Window.Resources>
        <converters:BoolToVisibilityColorConverter x:Key="BoolToVisibilityColorConverter"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header with Title -->
        <materialDesign:ColorZone Grid.Row="0" Mode="PrimaryMid" Padding="16,8">
            <TextBlock Text="Input Overlay Manager"
                       FontSize="18" FontWeight="Medium"
                       VerticalAlignment="Center"/>
        </materialDesign:ColorZone>

        <!-- Control Buttons Section -->
        <Grid Grid.Row="1" Margin="16,12">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0"
                    Content="Display All"
                    Style="{StaticResource CompactButtonStyle}"
                    Command="{Binding DisplayAllCommand}"
                    materialDesign:ButtonAssist.CornerRadius="4">
                <Button.Background>
                    <SolidColorBrush Color="{DynamicResource Primary500}"/>
                </Button.Background>
            </Button>

            <Button Grid.Column="1"
                    Content="Close All"
                    Style="{StaticResource CompactButtonStyle}"
                    Command="{Binding CloseAllCommand}"
                    materialDesign:ButtonAssist.CornerRadius="4">
                <Button.Background>
                    <SolidColorBrush Color="{DynamicResource Primary700}"/>
                </Button.Background>
            </Button>

            <Button Grid.Column="2"
                    Content="+ Add Input Overlay"
                    Style="{StaticResource CompactButtonStyle}"
                    Command="{Binding AddOverlayCommand}"
                    materialDesign:ButtonAssist.CornerRadius="4">
                <Button.Background>
                    <SolidColorBrush Color="{DynamicResource Secondary400}"/>
                </Button.Background>
            </Button>
        </Grid>

        <!-- Overlay List Section -->
        <materialDesign:Card Grid.Row="2" Margin="16,0,16,16" Padding="0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- List Header -->
                <Border Grid.Row="0" Background="{DynamicResource MaterialDesignDivider}"
                        Padding="8,6" BorderThickness="0,0,0,1"
                        BorderBrush="{DynamicResource MaterialDesignDivider}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="80"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="Name" FontWeight="Medium" FontSize="11"/>
                        <TextBlock Grid.Column="1" Text="ðŸ‘" FontSize="12" HorizontalAlignment="Center" ToolTip="Show"/>
                        <TextBlock Grid.Column="2" Text="âŒ" FontSize="12" HorizontalAlignment="Center" ToolTip="Close"/>
                        <TextBlock Grid.Column="3" Text="âœï¸" FontSize="12" HorizontalAlignment="Center" ToolTip="Edit"/>
                        <TextBlock Grid.Column="4" Text="ðŸ—‘ï¸" FontSize="12" HorizontalAlignment="Center" ToolTip="Delete"/>
                        <TextBlock Grid.Column="5" Text="Top Most" FontWeight="Medium" FontSize="11"/>
                    </Grid>
                </Border>

                <!-- Overlay List -->
                <ListBox Grid.Row="1"
                         ItemsSource="{Binding Overlays}"
                         SelectedItem="{Binding SelectedOverlay}"
                         ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                         ScrollViewer.VerticalScrollBarVisibility="Auto"
                         BorderThickness="0"
                         Background="Transparent">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem" BasedOn="{StaticResource OverlayListItemStyle}"/>
                    </ListBox.ItemContainerStyle>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="30"/>
                                    <ColumnDefinition Width="80"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Name Field -->
                                <TextBlock Grid.Column="0"
                                           Text="{Binding Name}"
                                           VerticalAlignment="Center"
                                           Padding="8,4"
                                           FontSize="14"/>

                                <!-- Show Button -->
                                <Button Grid.Column="1"
                                        Content="ðŸ‘"
                                        Style="{StaticResource CompactIconButtonStyle}"
                                        Command="{Binding DataContext.ShowOverlayCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                        CommandParameter="{Binding}"
                                        ToolTip="Show Overlay"
                                        Background="{Binding IsVisible, Converter={StaticResource BoolToVisibilityColorConverter}}"/>

                                <!-- Close Button -->
                                <Button Grid.Column="2"
                                        Content="âŒ"
                                        Style="{StaticResource CompactIconButtonStyle}"
                                        Command="{Binding DataContext.CloseOverlayCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                        CommandParameter="{Binding}"
                                        ToolTip="Close Overlay"/>

                                <!-- Edit Button -->
                                <Button Grid.Column="3"
                                        Content="âœï¸"
                                        Style="{StaticResource CompactIconButtonStyle}"
                                        Command="{Binding DataContext.EditOverlayCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                        CommandParameter="{Binding}"
                                        ToolTip="Edit Overlay"/>

                                <!-- Delete Button -->
                                <Button Grid.Column="4"
                                        Content="ðŸ—‘ï¸"
                                        Style="{StaticResource CompactIconButtonStyle}"
                                        Command="{Binding DataContext.DeleteOverlayCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                        CommandParameter="{Binding}"
                                        ToolTip="Delete Overlay"/>

                                <!-- Top Most Checkbox -->
                                <CheckBox Grid.Column="5"
                                          IsChecked="{Binding TopMost}"
                                          Style="{StaticResource CompactCheckBoxStyle}"
                                          Content="Top Most"/>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </materialDesign:Card>

        <!-- Status Bar -->
        <StatusBar Grid.Row="3" Background="{DynamicResource MaterialDesignDivider}">
            <StatusBarItem>
                <TextBlock Text="{Binding StatusMessage}" FontSize="11"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>